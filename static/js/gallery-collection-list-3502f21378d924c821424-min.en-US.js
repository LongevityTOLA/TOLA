(function(){var W={506222:function(h){h.exports={}}},k={};function T(h){var r=k[h];if(r!==void 0)return r.exports;var v=k[h]={exports:{}};return W[h](v,v.exports,T),v.exports}var D={};(function(){"use strict";var h=T(506222);YUI.add("squarespace-gallery-collection-list",function(r){var v=r.config.win,M=r.config.win.document,L=function(){var l={body:r.one("body"),gallery:r.one(".sqs-system-gallery"),slideWrapper:r.one(".sqs-system-gallery").one(".gallery-wrapper"),slidesAndControls:r.one(".sqs-system-gallery").one(".slides-controls"),circles:r.one(".sqs-system-gallery").one(".circles")},i={show:"show",ready:"sqs-system-gallery-ready",interaction:"sqs-system-gallery-interaction",mouseenterleft:"sqs-system-gallery-hover-slides-left",mouseenterright:"sqs-system-gallery-hover-slides-right",init:"sqs-system-gallery-init",circlesNav:"gallery-navigation-circles",crop:"gallery-auto-crop",iframe:"sqs-system-gallery-video-iframe"},n=null,c=null,z=window.innerWidth,g=[],_=[];function d(e,a){var t=r.Squarespace.Template.getTweakValue(e);return a?t=parseFloat(t):typeof t=="string"&&(t=t.toLowerCase()),t==="true"?t=!0:t==="false"&&(t=!1),t}function A(){var e=l.gallery.one(".slide.sqs-active-slide");return e&&e.getAttribute("data-type")==="video"&&e.one("iframe")}function C(){return d("gallery-design")!=="grid"}function N(e){var a=0,t=e&&e.match(/(\d+):(\d+)/);return t&&t.length===3&&(a=t[1]/t[2]),a}function S(){var e=l.gallery.one(".slide.sqs-active-slide"),a=e&&e.getAttribute("data-slide-id")||null,t=l.gallery.one('.slide-meta[data-slide-id="'+a+'"]');t&&(l.body.hasClass(i.crop)?t.setStyles({top:null,bottom:null,left:null,width:null}):(l.body.hasClass(i.circlesNav)?(t.setStyle("top",(parseFloat(e._node.clientHeight)-parseFloat(e.one("img")._node.clientHeight))/2),t.setStyle("bottom",null)):(t.setStyle("top",null),t.setStyle("bottom",(parseFloat(e._node.clientHeight)-parseFloat(e.one("img")._node.clientHeight))/2)),t.setStyles({left:e.one("img").getComputedStyle("left"),width:e.one("img")._node.clientWidth})))}function O(e,a,t){var s,y,p;return a&&(s=a.one(".title"),y=a.one(".description"),(s&&s._node.innerHTML||y&&y._node.innerHTML)&&(t?p=!0:(a.addClass(i.show),S()))),p}function b(e){var a=l.gallery.one(".slide.sqs-active-slide"),t=a&&a.one("img"),s=a&&a.getAttribute("data-slide-id")||null,y;if(l.gallery.all(".slide-meta").removeClass(i.show),e&&Modernizr&&!Modernizr.touch&&l.gallery.addClass(i.interaction),A()?(l.gallery.addClass(i.iframe),l.gallery.removeClass(i.mouseenterleft),l.gallery.removeClass(i.mouseenterright)):(l.gallery.removeClass(i.iframe),e&&e.type==="Gallery:currentIndexChange"&&(e.direction===-1?l.gallery.addClass(i.mouseenterleft):l.gallery.addClass(i.mouseenterright))),s&&(O(a,l.gallery.one('.slide-meta[data-slide-id="'+s+'"]')),t&&l.body.hasClass(i.circlesNav))){var p=function(){y=Math.max(0,(parseFloat(a._node.clientHeight)-parseFloat(t._node.clientHeight))/2),l.circles.setStyle("bottom",y)};t.get("complete")?p():g.push(t.on("load",p))}}function o(){var e=d("gallery-loop"),a=d("gallery-auto-crop"),t=d("gallery-autoplay"),s=d("gallery-transitions"),y=d("galleryAutoplaySpeed",!0)*1e3,p=d("gallery-navigation"),w=d("gallery-aspect-ratio"),H=w.split(" ")[0],m=!C(),q=0;H=parseInt(w.split(":")[1],10)/parseInt(w.split(":")[0],10),w=l.gallery._node.clientWidth*H,l.gallery.removeClass(i.init),l.gallery.removeClass(i.ready),l.gallery.removeClass(i.interaction),l.gallery.removeClass(i.mouseenterleft),l.gallery.removeClass(i.mouseenterright),l.gallery.all(".slide-meta").removeClass(i.show),n&&(q=n.get("currentIndex"),l.gallery.all(".sqs-disabled").removeClass("sqs-disabled"),l.gallery.all(".sqs-active-slide").removeClass("sqs-active-slide"),l.gallery.all(".slide, img").setStyles({visibility:null,left:null,top:null,overflow:null,width:null,height:null}),n.destroy()),c&&(l.gallery.all(".thumbnail img[data-src]").each(function(x){x.setStyles({height:null,width:null,top:null,left:null})}),c.destroy()),l.gallery.one(".slides-controls").setStyle("height",m?null:w),l.slideWrapper.setStyle("minHeight",m?null:w),n=new r.SQS.Gallery.Gallery2({container:".slides",slides:".slide",currentIndex:q,elements:{next:".next-slide, .simple .next",previous:".previous-slide, .simple .previous",controls:".dots, .numbers, .circles",currentIndex:".current-index",totalSlides:".total-slides"},loop:e,autoplay:m?!1:t,autoplayOptions:{randomize:!1,timeout:y,pauseOnMouseover:[".thumbnail-wrapper"]},lazyLoad:!0,loaderOptions:{mode:m?d("aspect-ratio")==="auto"?"none":"fill":a?"fill":"fit"},design:m?"autocolumns":"stacked",designOptions:{transition:s,lightbox:m,clickBehavior:"auto",gutter:d("gridSpacing",!0),columnWidth:d("gridSize",!0),aspectRatio:N(d("aspect-ratio"))},historyHash:!0}),l.gallery.all(".arrow").each(function(x){x.setStyle("top",l.slideWrapper._node.clientHeight/2)}),!m&&p==="thumbnails"&&(c=new r.SQS.Gallery.Gallery2({container:".thumbnail-wrapper",currentIndex:q,loaderOptions:{mode:"fill",load:!0},lazyLoad:!0,design:"strip"}),n.addChild(c));var X=n.after("currentIndexChange",b);b();var j=n.after("image-loaded",S);S(),l.gallery.addClass(i.ready),g.push(X,j)}function I(e){typeof e=="function"&&(window.throttleTimeout&&clearTimeout(window.throttleTimeout),window.throttleTimeout=setTimeout(e,750))}function G(e,a){var t=e._event.offsetX||e._event.layerX;l.gallery.addClass(i.interaction),e._event.target&&(e._event.target.localName==="img"||e._event.target.className==="sqs-video-opaque"||e.target.hasClass("slide"))&&(a?(l.gallery.removeClass(i.mouseenterleft),l.gallery.removeClass(i.mouseenterright)):t<=e._currentTarget.clientWidth/2?(l.gallery.removeClass(i.mouseenterright),l.gallery.addClass(i.mouseenterleft)):(l.gallery.removeClass(i.mouseenterleft),l.gallery.addClass(i.mouseenterright)))}function F(e){var a=e.keyCode;(a===37||a===39&&C())&&l.gallery.addClass(i.interaction)}function R(){var e=new r.Squarespace.ResizeEmitter({timeout:100});e.on("resize:end",function(){window.innerWidth!==z&&(z=window.innerWidth,I(o))}),_.push(e),Modernizr&&!Modernizr.touch&&g.push(r.on("mousemove",function(a){C()&&G(a,!1)},l.gallery.one(".slides-controls")),r.on("mouseleave",function(a){C()&&(G(a,!0),l.gallery.removeClass(i.iframe))},l.gallery.one(".slides-controls")),r.on("mouseenter",function(a){C()&&A()&&l.gallery.addClass(i.iframe)},l.gallery.one(".slides-controls"))),g.push(r.on("keydown",F))}function u(e,a){g.push(r.Global.on("tweak:change",function(t){if(t.getName()===e&&typeof a=="function"){var s=t.getValue();s==="true"?s=!0:s==="false"&&(s=!1),a(s)}}))}function E(){u("gallery-loop",o),u("gallery-transitions",o),u("gallery-auto-crop",o),u("gallery-navigation",function(e){e==="Thumbnails"&&!l.gallery.one(".thumbnail-wrapper img[src]")&&o(),S()}),u("gallery-autoplay",function(e){n.set("autoplay",e)}),u("gallery-aspect-ratio",function(){o()}),u("galleryAutoplaySpeed",function(){I(o)}),u("galleryInfoBackground",function(){b()}),u("gallery-design",o),u("aspect-ratio",o),u("gridSpacing",o),u("gridSize",o),r.Global&&g.push(r.Global.on(["tweak:reset","tweak:close"],function(e){r.later(500,this,o)},this))}function V(){o(),R(),r.Lang.isValue(Static.SQUARESPACE_CONTEXT.authenticatedAccount)&&E()}function Q(){g=g.filter(function(e){return e.detach(),!1}),_=_.filter(function(e){return typeof e.destroy=="function"&&e.destroy(),!1}),n&&(n.get("container")&&n.get("container").hide(),typeof n.destroy=="function"&&n.destroy()),c&&(c.get("container")&&c.get("container").hide(),typeof c.destroy=="function"&&c.destroy())}return{init:V,destroy:Q}},f;v.Squarespace.onInitialize(r,function(){var l=M.querySelector(".sqs-gallery-list");l&&(f=new L,f.init())}),v.Squarespace.onDestroy(r,function(){f&&(f.destroy&&typeof f.destroy=="function"&&f.destroy(),f=null)})},"1.0",{requires:["base","node","squarespace-dom-emitters-resize","squarespace-gallery-ng","squarespace-image-loader","squarespace-public-api"]})})()})();
//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/gallery-collection-list-51331775e9864d2e83d7d-min.en-US.js.map
